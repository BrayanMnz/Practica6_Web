<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text= "${titulo}">Document</title>


    <style>

       #table_product{
           color: darkblue;
       }  
       #by_Munoz{
           color: darkgoldenrod;
       }

       #nav-link{
         text-decoration: none;
         color: white;
       }

       #nav-link:hover{
         text-decoration: underline;
         color: red;
       }
       .main_heading{
        text-align: center;
        color: darkgoldenrod;
        /* background: rgb(0,0,0); */
background: linear-gradient(130deg, dimgray,  rgba(1,1,1,1) 93%, dimgray 65%, rgba(1,1,1,1) 93%);
       }
       #navigation{
        list-style-type: none;
       }

       .roboto{
    font-family: 'Roboto', sans-serif !important; 
}

/* custom background for panel  */
.container{ 
    padding-top: 50px !important;
    background-color: dimgray!important;  
}

/* custom background header panel */
.custom-header-panel{
    /* background-color: #004b8e !important; */
    background: linear-gradient(130deg, dimgray,  rgba(1,1,1,1) 93%, dimgray 65%, rgba(1,1,1,1) 93%);
    border-color: #004b8e !important;
    /* color: white; */
}

.no-margin-form-group {
    margin: 0 !important;
}
.requerido {
    color: red;
}
#heading_cliente{
  color: darkgoldenrod;
  text-decoration: solid;
  font-family: 'Courier New', Courier, monospace;
}
#formbackground{
  background-color: dimgray;
}


    </style>


</head>
<body style="background-color: dimgray;">
  <div th:if="${user}">

    <nav id="navigation" class="navbar navbar-expand-lg navbar-dark bg-dark">
        <!-- Container wrapper -->
        <div class="container-fluid">
          <!-- Toggle button -->
          <button
            class="navbar-toggler"
            type="button"
            data-mdb-toggle="collapse"
            data-mdb-target="#navbarRightAlignExample"
            aria-controls="navbarRightAlignExample"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <i class="fas fa-bars"></i>
          </button>
      
          <!-- Collapsible wrapper -->
          <div class="collapse navbar-collapse" id="navbarRightAlignExample">
            <!-- Left links -->
            <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="http://127.0.0.1:7000/Principal/ListadoProductos">Brayan's Shopping Cart</a>
              </li>
        
            </ul>
            <!-- Left links -->
          </div>
          
          <li class="nav-item">
            <a id="nav-link" class="nav-link" href="http://127.0.0.1:7000/Principal/ListadoProductos">Visualizar Productos</a>
          </li>

          <li class="nav-item">
            <a id="nav-link"  class="nav-link" href="http://127.0.0.1:7000/Principal/CrearProductos">Crear Productos</a>
          </li>

          <li class="nav-item">
            <a id="nav-link" class="nav-link" href="http://127.0.0.1:7000/Principal/CrearProductos">Actualizar Productos</a>
          </li>

          <li class="nav-item">
            <span class="glyphicon glyphicon-shopping-cart" style="color: white;"></span>
           </li>

          <li class="nav-item"></li>
            <a id="nav-link" class="nav-link" href="#" th:text="'Carrito [ '+${cantidad_Carrito}+' ]'"> Carrito </a>
          </li>

          <!-- Collapsible wrapper -->
        </div>
        <!-- Container wrapper -->
      </nav>
      <h2 class="main_heading"> <b>
       Listado de Ventas</b>
        <small class="text-muted"> <b style="color: black;">Brayan's Shopping Cart</b></small>
      </h2>




<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
<!------ Include the above in your HEAD tag ---------->

<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-10 col-md-offset-1">
            <table th:each="venta : ${misVentas}" class="table table-hover">
                <thead>
                    <h2 class="main_heading" th:text="${venta.getNombreCiente}"> <b>
                        Listado de Productos</b>
                        
                      </h2>
                    <tr>
                        <th>Producto</th>
                        <th>Cantidad</th>
                        <th colspan="2" class="text-center">Precio Ud.</th>
                        <!-- <th class="text-center">Total</th> -->
                        <th>Total(RD$)</th>
                        <th colspan="2" class="text-right"> Acción </th>
                    </tr>
                </thead>
                <tbody>
                    <tr th:each="producto : ${venta.getMisVentas().getMisProductos()}">
                        <td class="col-sm-6 col-md-4">
                        <div class="media">
                            <a class="thumbnail pull-left" href="#"> <img class="media-object" src="http://icons.iconarchive.com/icons/custom-icon-design/flatastic-2/72/product-icon.png" style="width: 72px; height: 72px;"> </a>
                            <div class="media-body">
                                <h4 class="media-heading"><a id="table_product" href="#"th:text="${producto.name_Product}">Product name</a></h4>
                                <h5 class="media-heading">by: <a id="by_Munoz" href="#">Muñoz V.</a></h5>
                                <span>Status: </span><span class="text-success"><strong>Disponible</strong></span>
                            </div>
                        </div></td>
                        <td class="col-sm-1 col-md-1" style="text-align: right">

                        <input type="number" readonly='readonly' min="1" class="form-control" id="exampleInputEmail1" name="qty" 
                        th:value="${producto.getQty_Product()}"
                        th:form="'add_form'+${producto.id_Product}">
                        
                        </td>
                        <td th:text="${producto.price_Product}" class="col-sm-2 col-md-2 text-right"><strong>100</strong></td>
                        <td class="col-sm-1 col-md-1 text-center"><strong></strong></td>
                        <td th:with="totalPrice=${producto.price_Product * producto.getQty_Product()}"  th:text="'RD$: '+${totalPrice}"class="col-sm-1 col-md-1 text-left" style="color: darkred; text-decoration: underline;"><strong>Total</strong></td>
                        <td class="col-sm-1 col-md-1 text-right">
                        <button name="agregar" type="submit" class="btn btn-danger" th:form="'add_form'+${producto.id_Product}">
                            <span class="glyphicon glyphicon-shopping-cart"></span> Eliminar
                        </button></td>

                <form th:id="'add_form'+${producto.getId_Product()}" th:action="'/Principal/EliminarCarrito/'+${producto.getId_Product()}" method="post"></form>

                      
                <tr>
                  <td>   </td>
                  <td>   </td>
                  <td>   </td>
                  
                  <td>   </td>
                  <td><h5>Subtotal</h5></td>
                  <td class="text-right"><h5 th:text="'RD$: '+${venta.getMisVentas().totalCarrito()}"><strong></strong></h5></td>
              </tr>
              <tr>
                  <td>   </td>
                  <td>   </td>
                  <td>   </td>
                  
                  <td>   </td>
                  <td><h5>ITBIS: 18%</h5></td>
                  <td th:with="ITBIS=${venta.getMisVentas().totalCarrito() * 0.18}" th:text="'RD$: '+${ITBIS}" class="text-right"><h5><strong></strong></h5></td>
              </tr>
              <tr>
                  <td>   </td>
                  <td>   </td>
                  <td>   </td>
                 
                  <td>   </td>
                  <td><h3>Total</h3></td>
                  <td th:with="total=${venta.getMisVentas().totalCarrito() * 1.18}"  class="col-sm-1 col-md-1 text-right"><h4 th:text="'RD$: '+${total}"></h4></td>
              </tr>
              <tr>
                  <td>   </td>
                  <td>   </td>
                  <td>   </td>
                   <td>   </td>

                  <td>   </td>

              </tr>

                </tbody>
            </table>
        </div>
    </div>
</div>

</body>
</div>
<div th:unless="${user}">

  <h2 style="text-align: center; color: aliceblue;" class="h2">
      NO TIENE ACCESO A ESTE RECURSO, DEBE SER UN ADMINISTRADOR. 
      SI ES ADMINISTRADOR  
      <small class="text-muted"><a href="http://localhost:7000/Practica_2/usuarios/login">INICIE SESIÓN</a></small>
    </h2>
  
  </div>
</html>